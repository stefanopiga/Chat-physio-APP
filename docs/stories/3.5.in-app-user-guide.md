# Story 3.5: In-App User Guide

**Status:** Done

## Story

**As a** Studente,
**I want** accedere a una semplice guida all'interno dell'applicazione,
**so that** posso capire rapidamente come usare la chat, interpretare le fonti e fornire feedback.

[Fonte: `docs/prd.md` Sez. 9, Story 3.5]

## Acceptance Criteria

1. Un'icona "Aiuto" (?) è visibile e accessibile nell'interfaccia della chat.
2. Cliccando sull'icona si apre una finestra modale con la guida.
3. La guida spiega in modo conciso:
   - come porre domande,
   - come funzionano le citazioni interattive delle fonti,
   - lo scopo dei pulsanti di feedback.
4. La guida è scritta in un linguaggio chiaro e semplice.
5. La UI rispetta il theming Light/Dark usando variabili semantiche; nessun colore hard-coded. [Fonte: `docs/prompt-for-lovable_V0.md` L50–L53, L52–L53]
6. Accessibilità dialog: controlli raggiungibili da tastiera, focus visibile, `label` sui controlli, chiusura con `Esc` e click outside. [Fonti: `docs/front-end-spec.md` Sez. 7; `docs/prompt-for-lovable_V0.md` L54–L55]

[Fonte: `docs/prd.md` L179–L181]

## Decisione Operativa

- Ambito: solo frontend. Nessun nuovo endpoint richiesto.
- Prerequisito tecnico completato: refactoring Tailwind CSS + Shadcn/UI (status "Done").

[Fonti: `docs/prd.md` Sez. 9; `docs/stories/tech.refactoring-tailwind-shadcn.md` L3]

## Vincoli Implementativi (UI/Dev)

- Libreria componenti: usare esclusivamente Shadcn/UI. [Fonte: `docs/prompt-for-lovable_V0.md` L51–L52]
- Componente Dialog: usare `Dialog` Shadcn/UI con pattern `asChild` per trigger. [Fonte: `docs/architecture/addendum-shadcn-dialog-implementation.md` Sez. 1]
- Styling: usare esclusivamente Tailwind CSS (utility classes); evitare CSS vanilla o styled-components. [Fonte: `docs/prompt-for-lovable_V0.md` L50, L59]
- Theming: supportare temi Light e Dark tramite variabili semantiche (niente colori hard-coded). [Fonti: `docs/prompt-for-lovable_V0.md` L50–L53; `docs/architecture/addendum-shadcn-dialog-implementation.md` Sez. 4]
- Font: stack di sistema sans-serif. [Fonte: `docs/prompt-for-lovable_V0.md` L53]
- Accessibilità: WCAG AA; Dialog con focus trap, `aria-label` su trigger, `DialogTitle`/`DialogDescription` obbligatori. [Fonti: `docs/prompt-for-lovable_V0.md` L5–L6, L54–L55; `docs/architecture/addendum-shadcn-dialog-implementation.md` Sez. 3]

## Piano Passo‑Passo

1. UI — Entry point
   - Aggiungere un'icona "Aiuto" persistente nella `ChatPage` in posizione non intrusiva.
   - Implementare come `DialogTrigger asChild` con `Button variant="ghost"` e `aria-label="Apri guida"`.
2. UI — Modale Guida
   - Installare componente Dialog Shadcn/UI: `npx shadcn@latest add dialog`.
   - Creare componente `HelpModal` con `Dialog`, `DialogContent`, `DialogHeader`, `DialogTitle`, `DialogDescription`.
   - Contenuto testuale conciso (sezioni: Benvenuto, Domande, Citazioni, Feedback) da `Guida-Rapida-a-FisioRAG.md`.
   - Styling: utility classes Tailwind con variabili semantiche (`bg-background`, `text-foreground`, `bg-card`).
   - Accessibilità: Dialog Shadcn/UI gestisce automaticamente focus trap, chiusura `Esc`, click outside, ripristino focus.
3. Test
   - E2E: visibilità icona, apertura/chiusura modale, contenuti minimi presenti.
   - Theming: verifica resa corretta in modalità Light/Dark e assenza di colori hard-coded.
   - Accessibilità: navigazione da tastiera e indicatori di focus visibili.
   - Screen reader: test con NVDA/VoiceOver per annunci ruolo dialog.

[Fonti: `docs/front-end-spec.md` Sez. 7; `docs/prompt-for-lovable_V0.md` L50–L55, L59; `docs/architecture/addendum-shadcn-dialog-implementation.md` Sez. 1, 3, 5]

## Contenuti Guida (testo)

- Base testuale da includere nella modale: `Guida-Rapida-a-FisioRAG.md`. [Fonte: `Guida-Rapida-a-FisioRAG.md`]

## Dev Notes

- Usare `<button aria-label="Apri guida">` per l'icona.
- La modale deve essere montata/disattivata nel DOM per evitare problemi di focus.
- Nessuna persistenza richiesta.
- Riferimento implementativo completo: `docs/architecture/addendum-shadcn-dialog-implementation.md`.

## File Locations

- Frontend: `/apps/web/`
- Docs: `/docs/`

## Tasks / Subtasks

- [x] Frontend: aggiungere icona "Aiuto" in `ChatPage` (Shadcn/UI + Tailwind).
- [x] Frontend: implementare `HelpModal` accessibile (Shadcn/UI + Tailwind).
- [x] QA: scrivere test E2E per guida in-app (inclusi theming e accessibilità).

## Quality Assurance

Risk profile: docs/qa/assessments/3.5-risk-20250930.md
Test design: docs/qa/assessments/3.5-test-design-20250930.md
PO validation: docs/qa/assessments/3.5-po-validate-20250930.md (GO)