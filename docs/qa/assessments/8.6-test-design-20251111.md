# Test Design: Story 8.6 — README Scripts Refinement (Windows)

Date: 2025-11-11
Designer: Quinn (Test Architect)

```yaml
test_design:
  scenarios_total: 18
  by_level:
    unit: 4
    integration: 9
    e2e: 5
  by_priority:
    p0: 6
    p1: 8
    p2: 4
  coverage_gaps: []
```

## Test Strategy Overview

- Goal: Validate Windows-first parity for scripts documentation with safe, working examples across cmd and PowerShell; ensure prerequisites, env vars, and security guidance are correct and actionable.
- Total test scenarios: 18 (Unit 4 / Integration 9 / E2E 5)
- Priorities: P0 6, P1 8, P2 4
- Focus areas: security safety callouts, per-session execution policy, env var clarity, doc/FS parity, destructive-command warnings, cross-shell behavior.

## Test Scenarios by Acceptance Criteria

### AC1: Verifica Completezza Documentazione

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-UNIT-001     | Unit        | P1       | Parse README sections map to directories (admin/ing/...)   | Pure mapping logic |
| 8.6-INT-001      | Integration | P1       | Diff scripts/ tree vs README anchors list                  | Doc/FS parity validation |
| 8.6-E2E-001      | E2E         | P1       | Reviewer runs checklist: no missing/extra entries          | Human validation for drift |

### AC2: Comandi Windows Native Verificati

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-INT-002      | Integration | P0       | Execute each example on cmd.exe; verify exit code/output   | Multi-component runtime |
| 8.6-INT-003      | Integration | P0       | Execute each example on PowerShell (5.1+)                  | Multi-component runtime |
| 8.6-UNIT-002     | Unit        | P1       | Path normalization examples use Windows separators          | Formatting check |
| 8.6-E2E-002      | E2E         | P1       | Run end-to-end example workflow across steps (token→ingest)| User journey validation |

### AC3: Dependency Management Chiarito

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-UNIT-003     | Unit        | P2       | Verify prerequisite commands and versions are accurate     | Static check |
| 8.6-INT-004      | Integration | P1       | Poetry install cmd (PowerShell) works as documented        | Env interaction |
| 8.6-INT-005      | Integration | P1       | pnpm install guidance verified on Windows                  | Env interaction |

### AC4: Environment Variables Setup Chiaro

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-UNIT-004     | Unit        | P0       | Env var tables present per category                        | Static presence check |
| 8.6-INT-006      | Integration | P0       | Validate placeholder-only .env example loads without leaks | Runtime env load |
| 8.6-INT-007      | Integration | P1       | Windows-specific troubleshooting paths are correct         | Env behavior |

### AC5: Esempi Comando Completi

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-INT-008      | Integration | P1       | Each script has at least one working example               | Coverage completeness |
| 8.6-E2E-003      | E2E         | P1       | Multi-step ingestion workflow yields expected outputs       | Journey validation |

### AC6: Troubleshooting Section Ampliata

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-INT-009      | Integration | P1       | Reproduce “Poetry not found in PATH”; verify guidance      | Practical fix verification |
| 8.6-INT-010      | Integration | P1       | Reproduce ExecutionPolicy error; verify per-session fix    | Security-safe workaround |
| 8.6-INT-011      | Integration | P2       | Reproduce Docker daemon not running; verify guidance       | Ops fix validation |

### AC7: Validazione Cross-Platform Notes

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-INT-012      | Integration | P1       | Bash-only scripts clearly marked with WSL/Git Bash notes   | Platform clarity |
| 8.6-E2E-004      | E2E         | P1       | cmd vs PowerShell behavior notes prevent failures          | Real-world validation |

### AC8: Security & Safety Requirements (QA-mandated)

#### Scenarios

| ID               | Level       | Priority | Test                                                       | Justification |
| ---------------- | ----------- | -------- | ---------------------------------------------------------- | ------------- |
| 8.6-INT-013      | Integration | P0       | All .ps1 examples use per-session Bypass pattern           | Security control |
| 8.6-E2E-005      | E2E         | P0       | Data-mutating examples include TEST-ONLY warnings          | Prevent prod impact |
| 8.6-INT-014      | Integration | P0       | Secret placeholders used; scanner guidance present         | Prevent leakage |

## Risk Coverage

- Mitigates SEC-801 via placeholder enforcement and scanner guidance (8.6-INT-014).
- Mitigates DATA-805 via TEST-ONLY callouts and safe endpoints (8.6-E2E-005).
- Mitigates OPS-802 via per-session Bypass examples (8.6-INT-013).
- Mitigates TECH-803 via doc/FS parity checks (8.6-INT-001) and path normalization (8.6-UNIT-002).
- Mitigates OPS-808 via verified cmd/PowerShell runs and behavior notes (8.6-INT-002/003, 8.6-E2E-004).

## Recommended Execution Order

1. P0 Integration: 8.6-INT-002, 8.6-INT-003, 8.6-INT-013, 8.6-INT-014, 8.6-INT-006
2. P0 E2E: 8.6-E2E-005
3. P1 Integration: 8.6-INT-001, 004, 005, 007, 008, 009, 010, 012
4. P1 E2E: 8.6-E2E-001, 002, 003, 004
5. P2: Remaining unit/integration troubleshooting scenarios

## Quality Checklist

- [x] Every AC has at least one scenario
- [x] Levels chosen per framework; avoid duplicates
- [x] Priorities align to risk profile
- [x] IDs follow convention 8.6-{LEVEL}-{SEQ}
- [x] Scenarios are atomic and independent

## Trace References

Test design matrix: docs/qa/assessments/8.6-test-design-20251111.md
P0 tests identified: 6

