# Coverage & NFR Gaps — Story 2.4.2: Error Handling Ingestion Pipeline

## Copertura
- **OpenAI Error Handling**: copertura 4/4 eccezioni con log e re-raise (rif. L79-L93; L206-L244:docs/stories/2.4.2-error-handling-ingestion-pipeline.md).
- **Supabase Insert Validation**: verifica `ids` non vuoto + messaggi specifici (rif. L279-L326:docs/stories/2.4.2-error-handling-ingestion-pipeline.md).
- **Logging Osservabilità**: inizio indexing, errori, success path (rif. L263-L301; L654-L659; L754-L759:docs/stories/2.4.2-error-handling-ingestion-pipeline.md).
- **Configurazioni DB/Env**: GRANT, RLS, trigger, variabili ambiente (rif. L520-L595:docs/stories/2.4.2-error-handling-ingestion-pipeline.md).

## Gaps NFR
- **AC2 simulazione connessione**: mancano evidenze log acquisite per `APIConnectionError` (solo scenario descritto) (rif. L150-L156).
- **Benchmark overhead**: assenza misurazioni quantitative post-logging/try-except; nessun degrado riportato ma non misurato (nessuna metrica nella story).
- **Alerting**: non definite metriche/alert su errori esterni persistenti (fuori scope nella story).

## Azioni Proposte
- **TC aggiuntivo**: introdurre test manuale per simulare `APIConnectionError` (network drop) con raccolta log (rif. L150-L156).
- **Micro-benchmark**: misurare latenza media di `index_chunks` con/ senza errori su 10 run e riportare nel report.
- **Osservabilità + Alert**: valutare conteggio errori OpenAI/Supabase e threshold alert in futuro (post-MVP).
