# Risk Profile: Story 4.1.5 — Admin Dashboard Hub

**Date**: 2025-10-01  
**Reviewer**: QA Team  
**Status**: Comprehensive Analysis Complete

---

## Executive Summary

- **Total Risks Identified**: 11
- **Critical Risks**: 1 (BLOCKER pre-implementation)
- **High Risks**: 2
- **Medium Risks**: 5
- **Low Risks**: 3
- **Overall Risk Score**: 42/100 (MEDIUM-LOW)
- **Recommended Action**: **PROCEED WITH CAUTION** — Risolvere R-4.1.5-1 (CRITICAL BLOCKER) prima di iniziare implementazione

---

## Scope & Sources

### Story Document
- `docs/stories/4.1.5-admin-dashboard-hub.md`

### Related Documents
- `docs/stories/1.4.placeholder-ui-and-protected-routes.md` (DashboardPage originale)
- `docs/stories/4.1.admin-debug-view.md` (pattern UI admin reference)
- `docs/qa/assessments/admin-dashboard-ux-gap-analysis-20251001.md` (context analisi)

### Codebase Analysis
- `apps/web/package.json` — Verificate dipendenze frontend
- `apps/web/src/components/ui/` — Verificati componenti Shadcn/UI disponibili
- `apps/web/components.json` — Configurazione Shadcn/UI attiva

---

## Critical Risks Requiring Immediate Attention

### R-4.1.5-1: Shadcn/UI Card Component Non Disponibile [BLOCKER]

**Categoria**: Dependency / Build  
**Severity**: CRITICAL  
**Status**: **BLOCKER PRE-IMPLEMENTATION**

**Descrizione**:
Shadcn/UI Card component NON installato in progetto. Verifica codebase conferma:
- Directory `apps/web/src/components/ui/` contiene solo `dialog.tsx`
- `package.json` non include Card component
- Implementation Story 4.1.5 richiede: `Card`, `CardHeader`, `CardDescription`

**Fonte**: 
- Story 4.1.5 L43, L53, L68-73 (esempio structure TSX)
- Codebase: `apps/web/src/components/ui/` — solo dialog.tsx presente

**Impact**:
- **Build Failure**: TypeScript compilation error su import Card
- **Implementation Blocked**: Zero LOC scrivibili senza Card component
- **Cascading Delay**: Blocca intera Story 4.1.5 → blocca Story 4.2

**Probability**: **CERTA** (100%) se non mitigato

**Risk Score**: 4 (Critical) × 4 (Blocking) = **16** (MASSIMO)

**Mitigation**:
1. **PRE-IMPLEMENTATION MANDATORY**: Installare Card component
   ```bash
   cd apps/web
   pnpm dlx shadcn@latest add card
   ```
2. **Verification Step**: Confermare file `src/components/ui/card.tsx` esiste
3. **Test Build**: `pnpm build` zero errori TypeScript
4. **Gating Condition**: Card installato → unblock implementation

**Residual Risk**: NONE (post-mitigation)

**Test Coverage**:
- Unit test (TC-008): Verifica import Card type-safe
- Build verification: TypeScript compilation success

**Priority**: **P0 — MUST RESOLVE BEFORE SPRINT START**


---

## High Priority Risks

### R-4.1.5-2: AdminGuard Regression During Refactoring

**Categoria**: Security / Access Control  
**Severity**: HIGH  
**Status**: Monitor

**Descrizione**:
Refactoring DashboardPage potrebbe introdurre regressione in AdminGuard se:
- Modifica accidentale route `/admin/dashboard` in App.tsx
- Rimozione wrapper `<AdminGuard>` durante editing
- Import errato componente refactored

**Fonte**:
- Story 4.1.5 AC7: "Dashboard accessibile solo ad admin autenticati (AdminGuard esistente)"
- App.tsx L34-40: Route dashboard protetta con AdminGuard

**Impact**:
- **Security Breach**: Dashboard accessibile a non-admin
- **Bypass Auth**: Student/anonymous potrebbero accedere funzionalità admin
- **Compliance Violation**: Violazione requisito autenticazione admin-only

**Probability**: Molto Bassa (10%) — Solo modifica file DashboardPage.tsx, non App.tsx

**Risk Score**: 1 (Low Prob) × 4 (High Impact) = **4** (HIGH)

**Mitigation**:
1. **Clear Scope**: Implementation Guidelines — NO modifica App.tsx
2. **Regression Test**: Re-run Story 4.1 E2E suite (3 test AdminGuard)
3. **Code Review Checklist**: Verifica route protection intatta
4. **E2E Coverage**: TC-005 (non-admin redirect) valida guard attivo

**Residual Risk**: VERY LOW (< 5%) post-mitigation

**Test Coverage**:
- E2E TC-005: Non-admin redirect (student login → `/`)
- Regression: Story 4.1 E2E-002, E2E-003 (redirect scenarios)

**Priority**: P1 — Test regression obbligatorio

---

### R-4.1.5-3: Session Email Extraction Failure

**Categoria**: Data Handling / UX  
**Severity**: HIGH (user-facing degradation)  
**Status**: Monitor + Mitigation Required

**Descrizione**:
`authService.getSession()` potrebbe restituire:
- Session null (timing race condition)
- Session.user.email undefined (edge case Supabase)
- Async call non awaited correttamente

Scenario impatto: Dashboard mostra "Benvenuto, undefined" o crash rendering.

**Fonte**:
- Story 4.1.5 AC3: "Dashboard mostra informazioni utente admin (email, ruolo)"
- Story 4.1.5 L48, L62: Email estratto da session
- Implementation Guide nota: "User info display con fallback pattern"

**Impact**:
- **UX Degradation**: Greeting generico vs personalizzato
- **Professional Appearance**: Admin vede placeholder invece di email
- **Trust Erosion**: Percezione sistema non affidabile

**Probability**: Bassa (20%) — authService già validato Story 4.1

**Risk Score**: 2 (Low-Med Prob) × 3 (Med-High Impact) = **6** (HIGH)

**Mitigation**:
1. **Loading State Pattern** obbligatorio in implementazione
2. **Fallback Display**: "Benvenuto, Amministratore" se email undefined
3. **Test Coverage**: Unit TC-002, TC-003, E2E TC-006

**Residual Risk**: VERY LOW (< 5%) con fallback pattern

**Priority**: P1 — Pattern obbligatorio in implementation


---

## Medium Priority Risks

### R-4.1.5-4: Link `/admin/analytics` 404 Pre-Story 4.2

**Categoria**: UX / Navigation  
**Severity**: MEDIUM  
**Status**: Expected Behavior (requires mitigation UX)

**Descrizione**: Card "Analytics Dashboard" linka `/admin/analytics` che non esiste fino a merge Story 4.2.

**Impact**: User confusion, percezione feature broken

**Probability**: Alta (80%)

**Risk Score**: 3 × 2 = **6** (MEDIUM)

**Mitigation**: Badge "Coming Soon" su card Analytics (pointer-events-none)

**Test Coverage**: Unit TC-005, E2E TC-003, TC-004

---

### R-4.1.5-5: Responsive Layout Breakage Mobile

**Categoria**: UI/UX / Cross-Device  
**Severity**: MEDIUM  
**Status**: Low Probability (pattern validato)

**Descrizione**: Grid Tailwind `md:grid-cols-2` potrebbe non collapsare correttamente mobile

**Impact**: Mobile UX degraded, layout broken

**Probability**: Bassa (20%) — Pattern validato in ChunkList (Story 4.1)

**Risk Score**: 2 × 2 = **4** (MEDIUM)

**Mitigation**: Pattern grid responsive già testato, E2E mobile viewport testing

**Test Coverage**: E2E TC-007 (mobile 375px), TC-008 (desktop 1280px)

---

### R-4.1.5-6: TypeScript Compilation Errors Post-Card Installation

**Categoria**: Build / Development  
**Severity**: MEDIUM  
**Status**: Monitor

**Descrizione**: Installazione Card component potrebbe introdurre type conflicts

**Impact**: Build blocked, development friction

**Probability**: Bassa (15%)

**Risk Score**: 2 × 2 = **4** (MEDIUM)

**Mitigation**: Pre-implementation verification `pnpm build`, test isolated rendering

---

### R-4.1.5-7: Routing Conflicts During Story 4.2 Integration

**Categoria**: Integration / Merge  
**Severity**: MEDIUM  
**Status**: Preventable (sequential merge)

**Descrizione**: Se Story 4.1.5 e 4.2 sviluppate in parallelo, possibili merge conflict

**Impact**: Merge overhead, testing rework

**Probability**: Media (50%) se parallelo, 0% se sequenziale

**Risk Score**: 3 × 2 = **6** (MEDIUM)

**Mitigation**: Sequential merge strategy (4.1.5 → 4.2), raccomandato in UX Gap Analysis

**Residual Risk**: NONE con sequential

---

### R-4.1.5-8: Performance Degradation on Slow Networks

**Categoria**: Performance / UX  
**Severity**: MEDIUM  
**Status**: Low Priority (admin-only)

**Descrizione**: Dashboard rendering lento su connessioni 3G

**Impact**: Loading delay 2-3s, perceived performance issue

**Probability**: Bassa (20%)

**Risk Score**: 2 × 2 = **4** (MEDIUM)

**Mitigation**: Loading state skeleton, monitor bundle size

**Priority**: P3 — Monitor, no action required MVP

---

### R-4.1.5-9: Accessibility Issues Card Navigation

**Categoria**: Accessibility / Compliance  
**Severity**: MEDIUM  
**Status**: Preventable (design compliance)

**Descrizione**: Card link potrebbero avere missing aria-label, focus ring non visibile

**Impact**: WCAG AA non rispettato, usability keyboard-only degraded

**Probability**: Bassa (20%) — Shadcn/UI compliant by design

**Risk Score**: 2 × 2 = **4** (MEDIUM)

**Mitigation**: Aria labels su link, test keyboard navigation

**Test Coverage**: Unit TC-006 (aria-label), manual accessibility test


---

## Low Priority Risks

### R-4.1.5-10: DashboardPage Test File Creation Conflicts

**Categoria**: Development / Tooling  
**Severity**: LOW

**Descrizione**: Creazione `DashboardPage.test.tsx` potrebbe richiedere mkdir `__tests__/`

**Impact**: Minor delay 2-3 minuti

**Probability**: Bassa (10%)

**Risk Score**: 1 × 1 = **1** (LOW)

---

### R-4.1.5-11: Documentation Screenshot Delay

**Categoria**: Documentation  
**Severity**: LOW

**Descrizione**: Task "Screenshot dashboard per reference" potrebbe essere dimenticato

**Impact**: Riferimento visivo mancante, onboarding quality reduced

**Probability**: Media (40%)

**Risk Score**: 2 × 1 = **2** (LOW)

**Mitigation**: Checklist post-merge

---

### R-4.1.5-12: Story 1.4 Documentation Update Missed

**Categoria**: Documentation  
**Severity**: LOW

**Descrizione**: Task "Aggiornare Story 1.4 note" potrebbe essere dimenticato

**Impact**: Documentation drift, Story 1.4 AC4 obsoleto

**Probability**: Media (40%)

**Risk Score**: 2 × 1 = **2** (LOW)

**Mitigation**: DoD checklist, cross-reference Story 4.1.5 in Story 1.4 changelog


---

## Risk Scoring Methodology

### Probability Scale
- **Certa (100%)**: 4 punti
- **Alta (60-80%)**: 3 punti
- **Media (30-50%)**: 2 punti
- **Bassa (10-25%)**: 1 punti

### Impact Scale
- **Critical (Blocker)**: 4 punti
- **High (Security/UX Major)**: 3 punti
- **Medium (UX Degraded)**: 2 punti
- **Low (Minor Friction)**: 1 punti

### Risk Score = Probability × Impact

---

## Overall Risk Score Calculation

| Risk ID | Score | Category |
|---------|-------|----------|
| R-4.1.5-1 | 16 | CRITICAL |
| R-4.1.5-2 | 4 | HIGH |
| R-4.1.5-3 | 6 | HIGH |
| R-4.1.5-4 | 6 | MEDIUM |
| R-4.1.5-5 | 4 | MEDIUM |
| R-4.1.5-6 | 4 | MEDIUM |
| R-4.1.5-7 | 6 | MEDIUM |
| R-4.1.5-8 | 4 | MEDIUM |
| R-4.1.5-9 | 4 | MEDIUM |
| R-4.1.5-10 | 1 | LOW |
| R-4.1.5-11 | 2 | LOW |
| R-4.1.5-12 | 2 | LOW |
| **Total** | **63** | — |

**Normalized Overall Risk Score**: 63 / 11 risks ≈ **5.7 / 16 max** = **36%**

**Interpretation**: **MEDIUM-LOW RISK** — Procedi con mitigazione R-4.1.5-1 (BLOCKER).

---

## Risk-Based Testing Strategy

### Critical Path Testing (P0)

**R-4.1.5-1 Mitigation Verification**:
1. Pre-implementation: Card installation verification
2. Build test: `pnpm build` zero errors
3. Unit TC-008: Card import type-safe

### High Priority Testing (P1)

**R-4.1.5-2 (AdminGuard Regression)**:
- E2E TC-005: Non-admin redirect
- Regression: Story 4.1 E2E suite re-run

**R-4.1.5-3 (Session Email Extraction)**:
- Unit TC-002: Session null fallback
- Unit TC-003: Email undefined fallback
- E2E TC-006: Email reale post-login

### Medium Priority Testing (P2)

**R-4.1.5-4 (Link 404)**:
- Unit TC-005: Badge "Coming Soon"
- E2E TC-003, TC-004: Badge visible, click disabled

**R-4.1.5-5 (Responsive)**:
- E2E TC-007: Mobile viewport 1 col
- E2E TC-008: Desktop viewport 2 col

**R-4.1.5-9 (Accessibility)**:
- Unit TC-006: Aria-label presente
- Manual test: Keyboard navigation


---

## Monitoring Requirements

### Pre-Implementation
1. [ ] **BLOCKER**: Card component installato e verificato
2. [ ] Build test TypeScript compilation success
3. [ ] Isolated Card rendering test passed

### During Implementation
1. AdminGuard protection intatta (no modifica App.tsx)
2. Session extraction con loading state + fallback
3. Grid responsive pattern validato
4. Badge "Coming Soon" implementato card Analytics

### Post-Implementation
1. Regression test Story 4.1 E2E suite (3 test)
2. Unit test coverage ≥ 90%
3. E2E test duration < 30 secondi
4. Manual accessibility test (keyboard navigation)

### Post-Deployment
1. Monitor admin sessions: 100% accedono dashboard prima altre feature
2. Zero 404 errors su `/admin/analytics` (badge disabled)
3. Zero regression auth admin (security logs)

---

## Residual Risks (Post-Mitigation)

### Acceptable Residual Risks

**R-4.1.5-1**: NONE — Card installato pre-implementation (BLOCKER risolto)

**R-4.1.5-2**: < 5% AdminGuard regression — Mitigato da no modifica App.tsx + regression test

**R-4.1.5-3**: < 5% Email extraction failure — Mitigato da fallback pattern + test coverage

**R-4.1.5-4**: NONE — Badge "Coming Soon" elimina confusion

**R-4.1.5-5**: < 5% Responsive issue — Pattern validato Story 4.1

**R-4.1.5-7**: NONE — Sequential merge elimina conflitti

### Unacceptable Residual Risks

**NONE** — Tutti i rischi CRITICAL/HIGH hanno mitigation efficace.

---

## Recommended Actions

### Immediate (Pre-Sprint Start)

**Action #1 — Resolve BLOCKER** (P0):
```bash
cd apps/web
pnpm dlx shadcn@latest add card
pnpm build  # Verify success
```

**Owner**: Dev Team  
**Deadline**: Prima di iniziare coding Story 4.1.5

### During Implementation (P1)

**Action #2 — Session Fallback Pattern**:
- Implementare loading state + fallback "Amministratore"
- Unit test TC-002, TC-003

**Owner**: Dev implementing DashboardPage  
**Deadline**: Durante implementation

**Action #3 — Badge "Coming Soon"**:
- Card Analytics con badge secondary variant
- E2E test TC-003, TC-004

**Owner**: Dev implementing DashboardPage  
**Deadline**: Durante implementation

### Post-Implementation (P2)

**Action #4 — Regression Testing**:
- Re-run Story 4.1 E2E suite (3 test)
- Verify AdminGuard protection intatta

**Owner**: QA Team  
**Deadline**: Pre-merge PR

**Action #5 — Accessibility Validation**:
- Manual keyboard navigation test
- Verify aria-label presente

**Owner**: QA Team  
**Deadline**: Pre-merge PR


---

## Comparison with Similar Stories

### Story 4.1 (Admin Debug View) Risk Profile

| Metric | Story 4.1 | Story 4.1.5 | Comparison |
|--------|-----------|-------------|------------|
| Total Risks | 5 | 11 | 4.1.5 più complessa apparentemente |
| Critical Risks | 1 | 1 | Pari (entrambe dependency blocker) |
| Overall Risk Score | 12/5 = 2.4 | 63/11 = 5.7 | 4.1.5 score più alto |
| Complexity | Medium-High | Low | **4.1.5 più semplice implementazione** |
| Risk Nature | Security/Feature | Dependency/UX | 4.1.5 rischi più gestibili |

**Interpretation**:
- Story 4.1.5 ha più rischi identificati ma **lower severity**
- Risk score più alto dovuto a granularità analisi (11 vs 5 risks)
- **Actual Risk**: Story 4.1.5 è **LOWER RISK** di 4.1 (solo refactoring frontend, no backend)
- BLOCKER R-4.1.5-1 facilmente risolvibile (1 comando)

---

## Conclusion & Recommendation

### Risk Assessment Summary

**Overall Risk Level**: **MEDIUM-LOW (36% score)**

**Critical Blockers**: 1 — Facilmente risolvibile pre-implementation

**High Risks**: 2 — Entrambi mitigabili con pattern consolidati (Story 4.1)

**Story Readiness**: **READY TO IMPLEMENT** dopo risoluzione R-4.1.5-1

### Recommendation to Product Owner

**Decision**: ✅ **APPROVE STORY 4.1.5 FOR IMPLEMENTATION**

**Conditions**:
1. **MANDATORY**: Risolvere R-4.1.5-1 (Card installation) pre-sprint start
2. **MANDATORY**: Implementare fallback pattern session email (R-4.1.5-3)
3. **MANDATORY**: Badge "Coming Soon" card Analytics (R-4.1.5-4)
4. **RECOMMENDED**: Sequential merge strategy vs Story 4.2

**Confidence Level**: **HIGH (85%)**

**Justification**:
- Solo 1 BLOCKER critico, risoluzione triviale (1 comando CLI)
- Pattern UI già validati Story 4.1 (Card usage, responsive grid)
- Zero modifiche backend → basso risk integration
- Test strategy comprehensive (8 unit + 8 E2E)
- Effort minimo (3-4h) vs beneficio UX significativo

### Next Steps

1. **Pre-Implementation** (30 min):
   - Dev Team: Installare Card component
   - Dev Team: Verificare build success
   - QA Team: Confermare checklist prerequisiti

2. **Implementation** (2-3h):
   - Refactoring DashboardPage
   - Implementazione pattern fallback + badge
   - Unit test suite (8 test)

3. **Testing** (1h):
   - E2E suite (8 test)
   - Regression Story 4.1
   - Manual accessibility

4. **Review & Merge** (30 min):
   - Code review
   - Merge to master
   - Deploy staging

**Total Effort**: 3.5-4.5h (entro 0.5 giorni come stimato)

---

## Change Log

| Date | Author | Change Description |
|------|--------|-------------------|
| 2025-10-01 | QA Team | Initial risk profile — Story 4.1.5 comprehensive analysis |
| 2025-10-01 | QA Team | Verified codebase: Card component NOT available (BLOCKER confirmed) |
| 2025-10-01 | QA Team | Risk scoring: 11 risks identified, overall score 36% (MEDIUM-LOW) |

---

## References

### Story Documents
- Story 4.1.5: `docs/stories/4.1.5-admin-dashboard-hub.md`
- Story 1.4: `docs/stories/1.4.placeholder-ui-and-protected-routes.md`
- Story 4.1: `docs/stories/4.1.admin-debug-view.md`

### QA Documents
- Test Design: `docs/qa/assessments/4.1.5-test-design-20251001.md`
- UX Gap Analysis: `docs/qa/assessments/admin-dashboard-ux-gap-analysis-20251001.md`

### Codebase Analysis
- `apps/web/package.json` — Dipendenze frontend verificate
- `apps/web/src/components/ui/` — Solo dialog.tsx presente (NO card.tsx)
- `apps/web/components.json` — Shadcn/UI configurato

### Architecture
- Implementation Guide: `docs/architecture/addendum-implementation-guide-4.1.5.md`
- Shadcn/UI Guidelines: `docs/architecture/addendum-shadcn-dialog-implementation.md`

---

**Risk Profile Completed**: 2025-10-01  
**Status**: Ready for PO Review & Sprint Planning
