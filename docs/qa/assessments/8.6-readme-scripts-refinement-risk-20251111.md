# Risk Profile: Story 8.6 — README Scripts Refinement (Windows)

Date: 2025-11-11
Reviewer: Quinn (Test Architect)

```yaml
# risk_summary (paste into gate file):
risk_summary:
  totals:
    critical: 0
    high: 2
    medium: 5
    low: 2
  highest:
    id: DATA-805
    score: 6
    title: 'Data-mutating scripts executed in wrong environment due to unclear docs'
  recommendations:
    must_fix:
      - 'Add explicit TEST-ONLY warnings to all mutating examples'
      - 'Provide cmd and PowerShell verified commands for every script'
      - 'Use per-session ExecutionPolicy Bypass only; remove any global policy guidance'
    monitor:
      - 'Add pre-flight prompts/guards to potentially destructive scripts'
      - 'Run periodic secret scanning after doc updates'
```

## Executive Summary

- Total Risks Identified: 9
- Critical Risks: 0
- High Risks: 2
- Medium Risks: 5
- Low Risks: 2
- Risk Score: 51/100

Overall, the story touches developer-facing operational documentation with security and safety implications. Primary risks cluster around: secret leakage via examples, misuse of PowerShell execution policy, ambiguity leading to running destructive commands against the wrong environment, and cross-shell inconsistencies causing failed or partial operations. Mitigations are straightforward if Acceptance Criteria are implemented precisely with Windows-verified commands and strong safety callouts.

## Scope and Context

- Story: docs/stories/8.6-readme-scripts-refinement.md
- Focus: Bring scripts/README.md to Windows-first parity, clarify prerequisites, environment variables, and safety guidance; verify cmd/PowerShell equivalence; mark Bash-only cases.

## Risk Matrix

| Risk ID   | Description                                                         | Prob. | Impact | Score | Priority |
|-----------|---------------------------------------------------------------------|-------|--------|-------|----------|
| DATA-805  | Data-mutating scripts executed in wrong env due to unclear docs     | 2     | 3      | 6     | High     |
| SEC-801   | Secret leakage via README examples or misused placeholders          | 2     | 3      | 6     | High     |
| OPS-804   | Over-broad “Run as Admin” guidance causing unsafe practices         | 2     | 2      | 4     | Medium   |
| OPS-802   | ExecutionPolicy changes applied globally instead of per-session     | 2     | 2      | 4     | Medium   |
| TECH-803  | Doc/FS drift: commands don’t match actual scripts/paths             | 2     | 2      | 4     | Medium   |
| PERF-806  | Perf scripts run without Docker/CPU constraints affecting machines  | 1     | 2      | 2     | Low      |
| DATA-807  | Incorrect .env guidance leading to prod credentials in dev tests    | 2     | 2      | 4     | Medium   |
| OPS-808   | Cross-shell differences (cmd vs PowerShell) break workflows         | 2     | 2      | 4     | Medium   |
| SEC-809   | Secret scan script misunderstood; false sense of security           | 1     | 2      | 2     | Low      |

Legend: Probability (1=Low, 2=Medium, 3=High); Impact (1=Low, 2=Medium, 3=High); Score = Prob x Impact.

## Risk Register and Mitigations

1) SEC-801 — Secret leakage via README examples or misused placeholders
- Assessment: Prob 2, Impact 3, Score 6 (High)
- Causes: Real tokens in examples; unclear placeholder formatting; copying from terminal history.
- Mitigations:
  - Use strong placeholders (e.g., ***REDACTED***, your-secret-here) in all examples.
  - Prominent callout “Never commit real secrets”; link secret scanning script and scope as WSL/Git Bash only.
  - Add pre-merge checklist item to run secret scan after README changes.
  - Require .env.example references without real values.
- Testing: Spot-check grep for common secret patterns; run scripts/security/run_secret_scans.sh on WSL.

2) DATA-805 — Data-mutating scripts executed in wrong environment
- Assessment: Prob 2, Impact 3, Score 6 (High)
- Causes: Missing TEST-ONLY warnings; ambiguous DB/API endpoints; copy/paste from perf/ingestion guides.
- Mitigations:
  - Add bold “TEST ENV ONLY” warnings before any data-changing command.
  - Default examples to localhost URLs and non-prod DBs; never show prod-like endpoints.
  - Consider interactive safeguards or dry-run flags in sensitive scripts.
- Testing: Execute examples against a disposable environment; verify no prod DNS/hosts referenced.

3) OPS-802 — Global ExecutionPolicy change guidance
- Assessment: Prob 2, Impact 2, Score 4 (Medium)
- Causes: Convenience tips encouraging Set-ExecutionPolicy at Machine scope.
- Mitigations:
  - Document only per-session Bypass usage patterns.
  - Remove or explicitly forbid global/machine-wide policy changes.
- Testing: Validate all .ps1 examples using `powershell -ExecutionPolicy Bypass -File .\\script.ps1`.

4) TECH-803 — Doc/FS drift and path mismatches
- Assessment: Prob 2, Impact 2, Score 4 (Medium)
- Causes: Missing audit between scripts/ and README; stale sections.
- Mitigations:
  - Complete AC1 audit; generate coverage checklist; ensure 1:1 mapping per subdirectory.
  - Prefer relative paths verified from project root; show both cmd and PowerShell variants where needed.
- Testing: Script to diff listed files vs README anchors; run in CI for future drift.

5) OPS-804 — Over-broad admin guidance
- Assessment: Prob 2, Impact 2, Score 4 (Medium)
- Causes: Generic “Run as Admin” notes without scope.
- Mitigations:
  - Scope admin requirements to exact steps; provide principle of least privilege guidance.
  - Offer alternatives (elevate only specific terminal when absolutely needed).
- Testing: Rerun examples as standard user; confirm minimal elevation points.

6) DATA-807 — Incorrect .env guidance
- Assessment: Prob 2, Impact 2, Score 4 (Medium)
- Causes: Missing variable lists per category; ambiguous placeholders.
- Mitigations:
  - Provide per-category env var tables; link `.env.example` and ISTRUZIONI-USO-VARIABILI-AMBIENTE.md.
  - Add troubleshooting for “variable not found” on Windows.
- Testing: Run validation scripts with only placeholder values to ensure safe failures.

7) OPS-808 — Cross-shell differences break workflows
- Assessment: Prob 2, Impact 2, Score 4 (Medium)
- Causes: Bash-centric examples; different quoting/path semantics in cmd/PowerShell.
- Mitigations:
  - Verify commands in cmd (Win10+) and PowerShell (5.1+); add notes where behavior differs.
  - Clearly mark Bash-only steps with “Use WSL or Git Bash”.
- Testing: Hands-on verification of every example; include expected output snippets.

8) PERF-806 — Performance scripts impact developer machines
- Assessment: Prob 1, Impact 2, Score 2 (Low)
- Causes: Running load tests without resource notes.
- Mitigations:
  - Add CPU/memory impact notes; suggest Docker resource limits and off-hours execution.
- Testing: Dry-run mode or small warmup runs documented.

9) SEC-809 — Secret scan script misunderstood
- Assessment: Prob 1, Impact 2, Score 2 (Low)
- Causes: Assuming scanner catches everything; Windows shell unsupported.
- Mitigations:
  - Clarify tool is Bash-only (WSL); document limitations and complementary manual checks.
- Testing: Demonstrate a benign secret-like string to show scanner behavior.

## Risk-Based Testing Strategy

- Priority High (Score 6):
  - Validate all mutating examples carry TEST-ONLY callouts; run against sandbox and confirm safe defaults.
  - Ensure all examples use placeholders and never real secrets; run secret scanner in WSL.
- Priority Medium (Score 4):
  - Execute every example in cmd and PowerShell with per-session Bypass; capture expected outputs.
  - Confirm README coverage audit: all scripts listed and mapped to sections; no orphan docs.
  - Verify env var tables and Windows troubleshooting paths.
- Priority Low (Score 2):
  - Add perf cautions and resource limit notes; validate non-destructive warmups.

## Gate Mapping (Deterministic)

- No score=9 risks identified → No automatic FAIL.
- Presence of score=6 risks → Gate should be at least CONCERNS until mitigations are implemented and verified.
- After AC2, AC4, AC5, AC6, AC8 are satisfied with evidence, downgrade risks to Medium/Low → Gate can move to PASS.

## Monitoring Requirements

- Security: Post-merge secret scan for docs/ and scripts/ changes.
- Operations: Track incidents related to incorrect script usage or env mistakes.
- DX: Collect developer feedback on cmd/PowerShell parity and friction points.

## Story Hook Line

Risk profile: docs/qa/assessments/8.6-readme-scripts-refinement-risk-20251111.md

