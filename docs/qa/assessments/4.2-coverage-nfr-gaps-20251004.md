# 4.2 – Coverage/NFR Gaps: Analytics Dashboard

## Meta
- Story: 4.2 (docs/stories/4.2.analytics-dashboard.md)
- Documenti correlati: 4.2-nfr-20251004.md, 4.2-trace-20251004.md
- Data: 2025-10-04

## Gap di Coverage Test (con riferimenti sorgente)
1) Backend Unit – discrepanza numero test
- Definiti: 6 test case (story righe 250-257)
- Esecuzione riportata: 7/7 PASS (story righe 457-458; NFR righe 56-58; Trace righe 68-70)
- Nota: mismatch tra numero definito (6) e passati (7).

2) Frontend Unit – discrepanza numero test
- Definiti: 8 test case (story righe 266-274)
- Esecuzione riportata: 10/10 PASS (story righe 458-459; NFR riga 57; Trace riga 69)
- Nota: mismatch tra numero definito (8) e passati (10).

3) E2E – discrepanza numero scenari
- Definiti: 10 scenari (story righe 284-295)
- Esecuzione riportata: 6/6 PASS (story righe 388-389, 459-460; Trace riga 70)
- Nota: mismatch tra numero definito (10) e passati (6).

## Gap NFR / Evidenze mancanti (con riferimenti sorgente)
4) Rate limiting – assenza evidenza test specifici
- Requisito: @limiter.limit("30/hour") (story riga 112)
- Evidenze: non disponibili esplicitamente nei test elencati (story righe 250-257; NFR Sez. Prestazioni riga 23; Trace Sez. 5/10)
- Stato: not available in source.

5) Caching aggregazioni 60s TTL (opzionale) – assenza evidenza implementazione/test
- Mitigazione: "cache aggregations (60s TTL opzionale)" (story riga 239)
- Evidenze implementative/test: not available in source.

6) Lazy load route `/admin/analytics` per contenimento bundle – assenza evidenza implementativa
- Mitigazione: "lazy load via React.lazy() per `/admin/analytics`" (story riga 239)
- Evidenze implementative: not available in source.

7) Accessibilità – assenza evidenze test specifici
- Linee guida accessibilità: righe 314-317
- Evidenze di test accessibilità per 4.2: not available in source.

8) Anonimizzazione `session_id` – evidenza test specifici non esplicita
- Requisito: hash SHA256 `session_id` (story righe 33, 113; Implementation righe 333)
- Stato implementativo dichiarato: sì (story righe 429-431; NFR riga 22; Trace riga 41)
- Evidenze test dedicate all’anonimizzazione: not available in source.

9) Persistenza analytics – debito tecnico accettato
- Rischio/Rimando a Phase 2: dati volatili in-memory (story riga 236; NFR riga 32; Trace riga 74)
- Stato: conforme a quanto dichiarato; nessuna evidenza di persistenza in questa fase (atteso).

10) Performance Line Chart temporale p95/p99 – differita a Phase 2
- Acceptance aggiornato: cards p95/p99 in MVP; Line Chart rinviata (story riga 31; NFR riga 16; Trace riga 73)
- Stato: conforme a quanto dichiarato; nessuna evidenza di Line Chart (atteso).

## Riepilogo Stato Coverage da fonti
- Backend Unit: definiti 6; riportati 7/7 PASS (story 250-257 vs 457-458)
- Frontend Unit: definiti 8; riportati 10/10 PASS (story 266-274 vs 458-459)
- E2E: definiti 10; riportati 6/6 PASS (story 284-295 vs 388-389, 459-460)

## Note di coerenza documentale
- Le discrepanze numeriche potrebbero derivare da aggiunta di test extra non riflessa nelle sezioni "Test Cases"; non disponibili dettagli in source.
