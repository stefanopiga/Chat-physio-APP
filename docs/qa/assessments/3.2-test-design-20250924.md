# Test Design: Story 3.2

Date: 2025-09-24
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: non disponibile nella fonte
- Unit tests: non disponibile nella fonte
- Integration tests: non disponibile nella fonte
- E2E tests: non disponibile nella fonte
- Priority distribution: non disponibile nella fonte

## Test Scenarios by Acceptance Criteria

### AC1: Prompt ingegnerizzato per rispondere solo dal contesto e citare fonti

#### Scenarios

| ID           | Level       | Priority | Test                                               | Justification                            |
| ------------ | ----------- | -------- | -------------------------------------------------- | ---------------------------------------- |
| 3.2-UNIT-001 | Unit        | non disponibile nella fonte | Validare costruzione prompt vincolato a contesto   | non disponibile nella fonte              |

### AC2: L'endpoint riceve domanda e chunk

#### Scenarios

| ID           | Level       | Priority | Test                                               | Justification                            |
| ------------ | ----------- | -------- | -------------------------------------------------- | ---------------------------------------- |
| 3.2-INT-001  | Integration | non disponibile nella fonte | Contratto richiesta: `question` + `chunks`         | non disponibile nella fonte              |

### AC3: Invoca l'LLM

#### Scenarios

| ID           | Level       | Priority | Test                                               | Justification                            |
| ------------ | ----------- | -------- | -------------------------------------------------- | ---------------------------------------- |
| 3.2-INT-002  | Integration | non disponibile nella fonte | Mock LLM: verifica chiamata con contesto chunk     | non disponibile nella fonte              |

### AC4: Restituisce la risposta con citazioni

#### Scenarios

| ID           | Level       | Priority | Test                                               | Justification                            |
| ------------ | ----------- | -------- | -------------------------------------------------- | ---------------------------------------- |
| 3.2-INT-003  | Integration | non disponibile nella fonte | Output include citazioni riferite a chunk input    | non disponibile nella fonte              |

### AC5: Gestisce la memoria a breve termine

#### Scenarios

| ID           | Level       | Priority | Test                                               | Justification                            |
| ------------ | ----------- | -------- | -------------------------------------------------- | ---------------------------------------- |
| 3.2-INT-004  | Integration | non disponibile nella fonte | Persistenza `ChatMessage` minima per sessione      | non disponibile nella fonte              |

## Risk Coverage

- Collega scenari a rischi: TECH-001, TECH-002 (vedi `docs/qa/assessments/3.2-risk-20250924.md`).

## Recommended Execution Order

1. P0 Unit tests (fail fast)
2. P0 Integration tests
3. P0 E2E tests
4. P1 tests in order
5. P2+ as time permits

---

Test design matrix: qa.qaLocation/assessments/3.2-test-design-20250924.md
P0 tests identified: non disponibile nella fonte
